const e="https://highscore-ff271-default-rtdb.europe-west1.firebasedatabase.app/highscores.json";async function t(){const t=await fetch(e);return Object.values(await t.json())}async function n(n){const s=await t();s.push(n),s.sort(((e,t)=>t.score-e.score)).splice(5);const i=s.map((async(t,n)=>{const s=`user${n+1}`;await fetch(`${e.slice(0,-5)}/${s}.json`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}));await Promise.all(i)}async function s(e,n=null){const s=await t();if(n){s.some((e=>e.name===n.name&&e.score===n.score))||(s.push(n),s.sort(((e,t)=>t.score-e.score)).splice(5))}const i=e?document.getElementById(e):document.getElementById("displayDiv");!function(e){const t=document.getElementById(e);if(t)for(;t.firstChild;)t.firstChild.remove()}("displayDiv"),s.forEach(((e,t)=>{const n=document.createElement("p");n.innerHTML=`${t+1}. ${e.name}: ${e.score}`,i.appendChild(n)}))}new class{constructor(){this.selectionBtns=document.querySelectorAll("[data-selection]"),this.finalColumn=document.querySelector("[data-finalcolumn]"),this.computerScoreSpan=document.querySelector("[data-computerScore]"),this.playerScoreSpan=document.querySelector("[data-yourscore]"),this.selections=[{name:"rock",emoji:"✊",beats:"scissors"},{name:"paper",emoji:"✋",beats:"rock"},{name:"scissors",emoji:"✌️",beats:"paper"}],this.initializeEventListeners()}initializeEventListeners(){document.getElementById("formNameInput").addEventListener("submit",(e=>this.handleNameInput(e))),this.selectionBtns.forEach((e=>{e.addEventListener("click",(t=>this.handleSelectionClick(t,e)))}))}handleNameInput(e){e.preventDefault();const t=document.getElementById("inputText");document.getElementById("playerName").innerText=t.value||"Player",t.value="",this.clearElement(document.getElementById("formNameInput")),document.querySelectorAll(".selection").forEach((e=>e.classList.remove("hidden")))}clearElement(e){for(;e.firstChild;)e.firstChild.remove()}createHTMLElement(e,t={}){const n=document.createElement(e);for(const e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}handleSelectionClick(e,t){const n=t.dataset.selection,s=this.selections.find((e=>e.name===n));this.makeSelection(s)}makeSelection(e){const t=this.computerRandomSelect(),n=this.isWinner(e,t),s=this.isWinner(t,e);this.addSelectionResult(t,s),this.addSelectionResult(e,n),n&&this.incrementScore(this.playerScoreSpan),s&&this.incrementScore(this.computerScoreSpan),this.endGame(this.playerScoreSpan,s)}incrementScore(e){e&&(e.innerText=parseInt(e.innerText)+1)}addSelectionResult(e,t){const n=document.createElement("div");n.innerText=e.emoji,n.classList.add("resultSelection"),t&&n.classList.add("winner"),this.finalColumn.after(n)}isWinner(e,t){return e.beats===t.name}computerRandomSelect(){const e=Math.floor(Math.random()*this.selections.length);return this.selections[e]}async endGame(e,t){if(t){const t=document.getElementById("playerName").innerText,i={name:t,score:parseInt(e.innerText)};await n(i),document.querySelectorAll(".selection").forEach((e=>{e.classList.add("hidden")}));const c=this.createHTMLElement("div",{className:"newGameDiv"}),a=this.createHTMLElement("H1",{id:"victoryH1",innerText:`${t} is the winner!`}),o=this.createHTMLElement("button",{id:"newGameBtn",innerText:"New Game"});o.addEventListener("click",(()=>{location.reload()}));const r=this.createHTMLElement("div",{id:"displayDiv"});document.querySelector(".selections").append(c),c.append(a,o,r),await s("displayDiv",i)}}};
//# sourceMappingURL=index.0bd3e6bb.js.map
