{"mappings":"AAAA,MAAMA,EACJ,yFAEFC,eAAeC,IACb,MAAMC,QAAiBC,MAAMJ,GAC7B,OAAOK,OAAOC,aAAaH,EAASI,OACtC,CAEAN,eAAeO,EAAiBC,GAC9B,MAAMC,QAAmBR,IACzBQ,EAAWC,KAAKF,GAChBC,EAAWE,MAAK,CAACC,EAAGC,IAAMA,EAAEC,MAAQF,EAAEE,QAAOC,OAAO,GAEpD,MAAMC,EAAiBP,EAAWQ,KAAIjB,MAAOkB,EAAOC,KAClD,MAAMC,EAAU,OAAOD,EAAI,UACrBhB,MAAM,GAAGJ,EAAIsB,MAAM,GAAG,MAAOD,SAAgB,CACjDE,OAAQ,MACRC,KAAMC,KAAKC,UAAUP,GACrBQ,QAAS,CAAE,eAAgB,qBAC7B,UAGIC,QAAQC,IAAIZ,EACpB,CAWAhB,eAAe6B,EAAkBC,EAAetB,EAAW,MACzD,MAAMC,QAAmBR,IAEzB,GAAIO,EAAU,CAEWC,EAAWsB,MAC/Bb,GAAUA,EAAMc,OAASxB,EAASwB,MAAQd,EAAMJ,QAAUN,EAASM,UAKpEL,EAAWC,KAAKF,GAChBC,EAAWE,MAAK,CAACC,EAAGC,IAAMA,EAAEC,MAAQF,EAAEE,QAAOC,OAAO,GAExD,CAEA,MAAMkB,EAAaH,EACfI,SAASC,eAAeL,GACxBI,SAASC,eAAe,eA3B9B,SAA6BL,GAC3B,MAAMM,EAASF,SAASC,eAAeL,GACvC,GAAIM,EACF,KAAOA,EAAOC,YACZD,EAAOC,WAAWC,QAGxB,CAsBEC,CAAoB,cAEpB9B,EAAW+B,SAAQ,CAACtB,EAAOuB,KACzB,MAAMC,EAAaR,SAASS,cAAc,KAC1CD,EAAWE,UAAY,GAAGH,EAAQ,MAAMvB,EAAMc,SAASd,EAAMJ,QAC7DmB,EAAWY,YAAYH,EAAA,GAE3B,CC3Da,ICAN,MACLI,cACEC,KAAKC,cAAgBd,SAASe,iBAAiB,oBAC/CF,KAAKG,YAAchB,SAASiB,cAAc,sBAC1CJ,KAAKK,kBAAoBlB,SAASiB,cAAc,wBAChDJ,KAAKM,gBAAkBnB,SAASiB,cAAc,oBAC9CJ,KAAKO,WAAa,CAChB,CACEtB,KAAM,OACNuB,MAAO,IACPC,MAAO,YAET,CACExB,KAAM,QACNuB,MAAO,IACPC,MAAO,QAET,CACExB,KAAM,WACNuB,MAAO,KACPC,MAAO,UAIXT,KAAKU,0BACP,CAEAA,2BACEvB,SACGC,eAAe,iBACfuB,iBAAiB,UAAWC,GAAUZ,KAAKa,gBAAgBD,KAC9DZ,KAAKC,cAAcR,SAASqB,IAC1BA,EAAaH,iBAAiB,SAAUC,GACtCZ,KAAKe,qBAAqBH,EAAOE,IAAA,GAGvC,CAEAD,gBAAgBD,GACdA,EAAMI,iBACN,MAAMC,EAAY9B,SAASC,eAAe,aACvBD,SAASC,eAAe,cAChC8B,UAAYD,EAAUE,OAAS,SAC1CF,EAAUE,MAAQ,GAClBnB,KAAKoB,aAAajC,SAASC,eAAe,kBAC1CD,SACGe,iBAAiB,cACjBT,SAAS4B,GAAYA,EAAQC,UAAU/B,OAAO,WACnD,CAEA6B,aAAaC,GACX,KAAOA,EAAQ/B,YACb+B,EAAQ/B,WAAWC,QAEvB,CAEAgC,kBAAkBC,EAAKC,EAAU,CAAC,GAChC,MAAMJ,EAAUlC,SAASS,cAAc4B,GACvC,IAAK,MAAME,KAAOD,EACZA,EAAQE,eAAeD,KACzBL,EAAQK,GAAOD,EAAQC,IAG3B,OAAOL,CACT,CAEAN,qBAAqBH,EAAOE,GAC1B,MAAMc,EAAgBd,EAAae,QAAQC,UACrCA,EAAY9B,KAAKO,WAAWwB,MAC/BD,GAAcA,EAAU7C,OAAS2C,IAEpC5B,KAAKgC,cAAcF,EACrB,CAEAE,cAAcF,GACZ,MAAMG,EAAoBjC,KAAKkC,uBACzBC,EAAenC,KAAKoC,SAASN,EAAWG,GACxCI,EAAiBrC,KAAKoC,SAASH,EAAmBH,GAExD9B,KAAKsC,mBAAmBL,EAAmBI,GAC3CrC,KAAKsC,mBAAmBR,EAAWK,GAE/BA,GAAcnC,KAAKuC,eAAevC,KAAKM,iBACvC+B,GAAgBrC,KAAKuC,eAAevC,KAAKK,mBAE7CL,KAAKwC,QAAQxC,KAAKM,gBAAiB+B,EACrC,CAEAE,eAAeE,GACTA,IACFA,EAAUvB,UAAYwB,SAASD,EAAUvB,WAAa,EAE1D,CAEAoB,mBAAmBR,EAAWa,GAC5B,MAAMC,EAAMzD,SAASS,cAAc,OACnCgD,EAAI1B,UAAYY,EAAUtB,MAC1BoC,EAAItB,UAAUuB,IAAI,mBACdF,GAAQC,EAAItB,UAAUuB,IAAI,UAC9B7C,KAAKG,YAAY2C,MAAMF,EACzB,CAEAR,SAASN,EAAWiB,GAClB,OAAOjB,EAAUrB,QAAUsC,EAAkB9D,IAC/C,CAEAiD,uBACE,MAAMc,EAAcC,KAAKC,MAAMD,KAAKE,SAAWnD,KAAKO,WAAW6C,QAC/D,OAAOpD,KAAKO,WAAWyC,EACzB,CAEA/F,cAAcoG,EAAahB,GACzB,GAAIA,EAAgB,CAElB,MAAMiB,EAAanE,SAASC,eAAe,cAAc8B,UAEnDzD,EAAW,CACfwB,KAAMqE,EACNvF,MAAO2E,SAASW,EAAYnC,kBAGxB1D,EAAiBC,GAEvB0B,SAASe,iBAAiB,cAAcT,SAAS8D,IAC/CA,EAAIjC,UAAUuB,IAAI,aAGpB,MAAMD,EAAM5C,KAAKuB,kBAAkB,MAAO,CAAEiC,UAAW,eACjDC,EAAKzD,KAAKuB,kBAAkB,KAAM,CACtCmC,GAAI,YACJxC,UAAW,GAAGoC,qBAEVC,EAAMvD,KAAKuB,kBAAkB,SAAU,CAC3CmC,GAAI,aACJxC,UAAW,aAEbqC,EAAI5C,iBAAiB,SAAS,KAC5BgD,SAASC,QAAM,IAEjB,MAAM1E,EAAac,KAAKuB,kBAAkB,MAAO,CAAEmC,GAAI,eAEvDvE,SAASiB,cAAc,eAAeyD,OAAOjB,GAC7CA,EAAIiB,OAAOJ,EAAIF,EAAKrE,SAEdJ,EAAkB,aAAcrB,EACxC,CACF","sources":["src/js/highscore.js","src/main.js","src/js/RockPaperScissors.js"],"sourcesContent":["const url =\r\n  \"https://highscore-ff271-default-rtdb.europe-west1.firebasedatabase.app/highscores.json\";\r\n\r\nasync function getHighscores() {\r\n  const response = await fetch(url);\r\n  return Object.values(await response.json());\r\n}\r\n\r\nasync function updateHighscores(newEntry) {\r\n  const highscores = await getHighscores();\r\n  highscores.push(newEntry);\r\n  highscores.sort((a, b) => b.score - a.score).splice(5);\r\n\r\n  const updatePromises = highscores.map(async (entry, i) => {\r\n    const userKey = `user${i + 1}`;\r\n    await fetch(`${url.slice(0, -5)}/${userKey}.json`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(entry),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    });\r\n  });\r\n\r\n  await Promise.all(updatePromises); // Wait for all updates to finish\r\n}\r\n\r\nfunction removeChildElements(parentElement) {\r\n  const parent = document.getElementById(parentElement);\r\n  if (parent) {\r\n    while (parent.firstChild) {\r\n      parent.firstChild.remove();\r\n    }\r\n  }\r\n}\r\n\r\nasync function displayHighscores(parentElement, newEntry = null) {\r\n  const highscores = await getHighscores();\r\n\r\n  if (newEntry) {\r\n    // Check if the newEntry is already in the highscores\r\n    const newEntryExists = highscores.some(\r\n      (entry) => entry.name === newEntry.name && entry.score === newEntry.score\r\n    );\r\n\r\n    // If newEntry is not in the highscores, add and sort it\r\n    if (!newEntryExists) {\r\n      highscores.push(newEntry);\r\n      highscores.sort((a, b) => b.score - a.score).splice(5);\r\n    }\r\n  }\r\n\r\n  const displayDiv = parentElement\r\n    ? document.getElementById(parentElement)\r\n    : document.getElementById(\"displayDiv\");\r\n\r\n  removeChildElements(\"displayDiv\");\r\n\r\n  highscores.forEach((entry, index) => {\r\n    const highscoreP = document.createElement(\"p\");\r\n    highscoreP.innerHTML = `${index + 1}. ${entry.name}: ${entry.score}`;\r\n    displayDiv.appendChild(highscoreP);\r\n  });\r\n}\r\n\r\nexport { updateHighscores, displayHighscores };\r\n","import { RockPaperScissors } from \"./js/RockPaperScissors.js\";\r\n\r\nconst game = new RockPaperScissors();\r\n","import { updateHighscores, displayHighscores } from \"./highscore.js\";\r\n\r\nexport class RockPaperScissors {\r\n  constructor() {\r\n    this.selectionBtns = document.querySelectorAll(\"[data-selection]\");\r\n    this.finalColumn = document.querySelector(\"[data-finalcolumn]\");\r\n    this.computerScoreSpan = document.querySelector(\"[data-computerScore]\");\r\n    this.playerScoreSpan = document.querySelector(\"[data-yourscore]\");\r\n    this.selections = [\r\n      {\r\n        name: \"rock\",\r\n        emoji: \"✊\",\r\n        beats: \"scissors\",\r\n      },\r\n      {\r\n        name: \"paper\",\r\n        emoji: \"✋\",\r\n        beats: \"rock\",\r\n      },\r\n      {\r\n        name: \"scissors\",\r\n        emoji: \"✌️\",\r\n        beats: \"paper\",\r\n      },\r\n    ];\r\n\r\n    this.initializeEventListeners();\r\n  }\r\n\r\n  initializeEventListeners() {\r\n    document\r\n      .getElementById(\"formNameInput\")\r\n      .addEventListener(\"submit\", (event) => this.handleNameInput(event));\r\n    this.selectionBtns.forEach((selectionBtn) => {\r\n      selectionBtn.addEventListener(\"click\", (event) =>\r\n        this.handleSelectionClick(event, selectionBtn)\r\n      );\r\n    });\r\n  }\r\n\r\n  handleNameInput(event) {\r\n    event.preventDefault();\r\n    const inputText = document.getElementById(\"inputText\");\r\n    const playerName = document.getElementById(\"playerName\");\r\n    playerName.innerText = inputText.value || \"Player\";\r\n    inputText.value = \"\";\r\n    this.clearElement(document.getElementById(\"formNameInput\"));\r\n    document\r\n      .querySelectorAll(\".selection\")\r\n      .forEach((element) => element.classList.remove(\"hidden\"));\r\n  }\r\n\r\n  clearElement(element) {\r\n    while (element.firstChild) {\r\n      element.firstChild.remove();\r\n    }\r\n  }\r\n\r\n  createHTMLElement(tag, options = {}) {\r\n    const element = document.createElement(tag);\r\n    for (const key in options) {\r\n      if (options.hasOwnProperty(key)) {\r\n        element[key] = options[key];\r\n      }\r\n    }\r\n    return element;\r\n  }\r\n\r\n  handleSelectionClick(event, selectionBtn) {\r\n    const selectionName = selectionBtn.dataset.selection;\r\n    const selection = this.selections.find(\r\n      (selection) => selection.name === selectionName\r\n    );\r\n    this.makeSelection(selection);\r\n  }\r\n\r\n  makeSelection(selection) {\r\n    const computerSelection = this.computerRandomSelect();\r\n    const playerWinner = this.isWinner(selection, computerSelection);\r\n    const computerWinner = this.isWinner(computerSelection, selection);\r\n\r\n    this.addSelectionResult(computerSelection, computerWinner);\r\n    this.addSelectionResult(selection, playerWinner);\r\n\r\n    if (playerWinner) this.incrementScore(this.playerScoreSpan);\r\n    if (computerWinner) this.incrementScore(this.computerScoreSpan);\r\n\r\n    this.endGame(this.playerScoreSpan, computerWinner); // Pass computerWinner instead of computerScore\r\n  }\r\n\r\n  incrementScore(scoreSpan) {\r\n    if (scoreSpan) {\r\n      scoreSpan.innerText = parseInt(scoreSpan.innerText) + 1;\r\n    }\r\n  }\r\n\r\n  addSelectionResult(selection, winner) {\r\n    const div = document.createElement(\"div\");\r\n    div.innerText = selection.emoji;\r\n    div.classList.add(\"resultSelection\");\r\n    if (winner) div.classList.add(\"winner\");\r\n    this.finalColumn.after(div);\r\n  }\r\n\r\n  isWinner(selection, opponentSelection) {\r\n    return selection.beats === opponentSelection.name;\r\n  }\r\n\r\n  computerRandomSelect() {\r\n    const randomIndex = Math.floor(Math.random() * this.selections.length);\r\n    return this.selections[randomIndex];\r\n  }\r\n\r\n  async endGame(playerScore, computerWinner) {\r\n    if (computerWinner) {\r\n      // Check if computerWinner is true\r\n      const playerName = document.getElementById(\"playerName\").innerText;\r\n\r\n      const newEntry = {\r\n        name: playerName,\r\n        score: parseInt(playerScore.innerText),\r\n      };\r\n\r\n      await updateHighscores(newEntry);\r\n\r\n      document.querySelectorAll(\".selection\").forEach((btn) => {\r\n        btn.classList.add(\"hidden\");\r\n      });\r\n\r\n      const div = this.createHTMLElement(\"div\", { className: \"newGameDiv\" });\r\n      const h1 = this.createHTMLElement(\"H1\", {\r\n        id: \"victoryH1\",\r\n        innerText: `${playerName} is the winner!`,\r\n      });\r\n      const btn = this.createHTMLElement(\"button\", {\r\n        id: \"newGameBtn\",\r\n        innerText: \"New Game\",\r\n      });\r\n      btn.addEventListener(\"click\", () => {\r\n        location.reload();\r\n      });\r\n      const displayDiv = this.createHTMLElement(\"div\", { id: \"displayDiv\" });\r\n\r\n      document.querySelector(\".selections\").append(div);\r\n      div.append(h1, btn, displayDiv);\r\n\r\n      await displayHighscores(\"displayDiv\", newEntry);\r\n    }\r\n  }\r\n}\r\n"],"names":["$735b27629e838dcd$var$url","async","$735b27629e838dcd$var$getHighscores","response","fetch","Object","values","json","$735b27629e838dcd$export$a541beb660d65f60","newEntry","highscores","push","sort","a","b","score","splice","updatePromises","map","entry","i","userKey","slice","method","body","JSON","stringify","headers","Promise","all","$735b27629e838dcd$export$b9501187a90c1efb","parentElement","some","name","displayDiv","document","getElementById","parent","firstChild","remove","$735b27629e838dcd$var$removeChildElements","forEach","index","highscoreP","createElement","innerHTML","appendChild","constructor","this","selectionBtns","querySelectorAll","finalColumn","querySelector","computerScoreSpan","playerScoreSpan","selections","emoji","beats","initializeEventListeners","addEventListener","event","handleNameInput","selectionBtn","handleSelectionClick","preventDefault","inputText","innerText","value","clearElement","element","classList","createHTMLElement","tag","options","key","hasOwnProperty","selectionName","dataset","selection","find","makeSelection","computerSelection","computerRandomSelect","playerWinner","isWinner","computerWinner","addSelectionResult","incrementScore","endGame","scoreSpan","parseInt","winner","div","add","after","opponentSelection","randomIndex","Math","floor","random","length","playerScore","playerName","btn","className","h1","id","location","reload","append"],"version":3,"file":"index.0bd3e6bb.js.map"}